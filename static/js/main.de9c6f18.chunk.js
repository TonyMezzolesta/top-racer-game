(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(t,e,i){t.exports=i.p+"static/media/Audi.5498a290.png"},function(t,e,i){t.exports=i.p+"static/media/truck.0c526a94.png"},function(t,e,i){t.exports=i.p+"static/media/road.a03ad39a.png"},function(t,e,i){t.exports=i.p+"static/media/taxi.b2ca867e.png"},function(t,e,i){t.exports=i.p+"static/media/Car.a39891fa.png"},function(t,e,i){t.exports=i(8)},function(t,e,i){},,function(t,e,i){"use strict";i.r(e);i(6);function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}var r={listen:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;!function(t){document.addEventListener("keydown",function(e){37===e.keyCode?t.left=!0:38===e.keyCode?t.up=!0:39===e.keyCode?t.right=!0:40===e.keyCode?t.down=!0:32===e.keyCode&&(t.space=!0)},!1),document.addEventListener("keyup",function(e){37===e.keyCode?t.left=!1:38===e.keyCode?t.up=!1:39===e.keyCode?t.right=!1:40===e.keyCode?t.down=!1:32===e.keyCode&&(t.space=!1)},!1)}(t),function(t,e){e.addEventListener("mousemove",function(i){t.mousePos=function(t,e){var i=e.getBoundingClientRect();return{x:t.clientX-i.left,y:t.clientY-i.top}}(i,e)},!1),e.addEventListener("mousedown",function(e){t.mousedown=!0,t.mouseButton=e.button},!1),e.addEventListener("mouseup",function(e){t.mousedown=!1},!1)}(t,e)}},c=0,h={getDelta:function(t){var e=t-c;return c=t,e},distanceToMove:function(t,e){return e*t/1e3}};function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e,i){return(l=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var s=new(Function.bind.apply(t,n));return i&&u(s,i.prototype),s}).apply(null,arguments)}var f=function(){function t(e,i,n,a,o){s(this,t),this.img=e,this.x=i,this.y=n,this.width=a,this.height=o}return o(t,[{key:"draw",value:function(t,e,i,n){t.drawImage(this.img,this.x,this.y,this.width,this.height,e,i,this.width*n,this.height*n)}}]),t}(),p=function(t,e,i,n,s,a,o,r){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return!(t>s+o+c||t+i+c<s)&&!(e>a+r+c||e+n+c<a)},d=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.height,s=t.width,a=e.height,o=e.width,r=t.position,c=r.x,h=r.y,u=e.position,l=u.x,f=u.y;return p(c,h,s,n,l,f,o,a,i)},v=function(){function t(e,i){s(this,t),this.ctx=e,this.inputStates=i,this.position={x:0,y:0},this.scale=.7}return o(t,[{key:"setImage",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this.sprite=l(f,[t].concat(i))}},{key:"checkCollision",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return!!i.find(function(e){return d(t,e)})}},{key:"moveToStartPosition",value:function(){var t=this.ctx.canvas,e=t.height,i=t.width;this.position={x:i/2-this.sprite.width*this.scale/2,y:e-16-this.sprite.height*this.scale}}},{key:"setPosition",value:function(t,e){this.position={x:t,y:e}}},{key:"update",value:function(e){this.inputStates.left&&(this.position.x+=-t.maxSpeed*e),this.inputStates.right&&(this.position.x+=t.maxSpeed*e),this.sprite.draw(this.ctx,this.position.x,this.position.y,this.scale)}},{key:"height",get:function(){return this.sprite.height*this.scale}},{key:"width",get:function(){return this.sprite.width*this.scale}}]),t}();v.maxSpeed=.5;var y=v,x=function(){function t(e,i){s(this,t),this.ctx=e,this.inputStates=i,this.speed={x:0,y:.5},this.totalSeconds=0}return o(t,[{key:"setImage",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this.sprite=l(f,[t].concat(i))}},{key:"update",value:function(t){var e=this.ctx.canvas.width,i=this.sprite,n=i.height,s=i.width;this.totalSeconds+=t;var a=Math.ceil(e/s)+1,o=this.totalSeconds*this.speed.y%n;this.ctx.save(),this.ctx.translate(0,o);for(var r=0;r<a;r++)this.sprite.draw(this.ctx,e/2-s/2,-r*n,1);this.ctx.restore()}}]),t}();x.LANE_CENTER=[220,344,476];var g=x,m={images:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=0,s={};return new Promise(function(t){e.forEach(function(i){var a=new Image;a.src=i,a.onload=function(){n++,s[i]=a,n===e.length&&t(s)}})})}},k=function(){function t(e){s(this,t),this.ctx=e,this.scale=.9,this.speed={x:0,y:.1}}return o(t,[{key:"setImage",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this.sprite=l(f,[t].concat(i))}},{key:"moveToStartPosition",value:function(e){var i=e||this.startOffset;this.lane=t.getRandomInt(0,g.LANE_CENTER.length);var n=this.sprite,s=n.height,a=n.width;this.position={x:g.LANE_CENTER[this.lane]-a/2,y:-(s+i)},this.startOffset=i}},{key:"update",value:function(t){this.position.y+=this.speed.y*t,this.sprite.draw(this.ctx,this.position.x,this.position.y,this.scale),this.position.y>this.ctx.canvas.height&&this.moveToStartPosition()}},{key:"height",get:function(){return this.sprite.height*this.scale}},{key:"width",get:function(){return this.sprite.width*this.scale}}],[{key:"getRandomInt",value:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t}}]),t}(),w=i(0),S=i.n(w),E=i(1),T=i.n(E),b=i(2),C=i.n(b),N=i(3),L=i.n(N),A=i(4),P=i.n(A),R=5e3,O={MAIN_MENU:0,RUNNING:1,GAME_OVER:2},I=.15,M=.12,G=.14,_=.4,j=function(){function t(){s(this,t),this.inputStates={},this.currentGameState=O.RUNNING,this.currentLevel=1,this.currentLevelTime=R}return o(t,[{key:"loadAssets",value:function(t){m.images(S.a,C.a,T.a,L.a,P.a).then(function(e){return t(e)})}},{key:"start",value:function(t){var e=this;this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.ctx.font="22px Arial",r.listen(this.inputStates,this.canvas),this.player=new y(this.ctx,this.inputStates),this.road=new g(this.ctx,this.inputStates),this.truck=new k(this.ctx),this.taxi=new k(this.ctx),this.car=new k(this.ctx),this.loadAssets(function(t){e.player.setImage(t[S.a],78,24,96,216),e.road.setImage(t[C.a],0,0,840,650),e.truck.setImage(t[T.a],78,24,96,216),e.car.setImage(t[P.a],78,24,96,216),e.taxi.setImage(t[L.a],72,18,102,220),e.car.scale=.79,e.taxi.scale=.68,e.resetEntities(),requestAnimationFrame(e.mainLoop.bind(e))})}},{key:"resetEntities",value:function(){this.player.moveToStartPosition(),this.taxi.moveToStartPosition(200),this.truck.moveToStartPosition(450),this.car.moveToStartPosition(700),this.road.speed.y=_,this.truck.speed.y=I,this.taxi.speed.y=G,this.car.speed.y=M}},{key:"clearCanvas",value:function(){var t=this.canvas,e=t.width,i=t.height;this.ctx.clearRect(0,0,e,i)}},{key:"running",value:function(e){this.clearCanvas(),this.road.update(e),this.player.update(e),this.truck.update(e),this.taxi.update(e),this.car.update(e),this.displayScore(),this.currentLevelTime-=e,this.player.checkCollision(this.truck,this.taxi,this.car)&&(this.currentGameState=O.GAME_OVER),t.checkCollision(this.car,this.truck),t.checkCollision(this.car,this.taxi),t.checkCollision(this.taxi,this.truck)}},{key:"gameOver",value:function(){var t=this.ctx.canvas.width;this.ctx.save(),this.ctx.fillStyle="White",this.ctx.fillText("GAME OVER",t/2,100),this.ctx.fillText("Press SPACE to start again",t/2,150),this.ctx.fillText("Move with arrow keys",t/2,200),this.ctx.fillText("Survive 5 seconds for next level",t/2,250),this.ctx.restore()}},{key:"mainLoop",value:function(t){var e=h.getDelta(t);switch(this.currentGameState){case O.RUNNING:this.running(e),this.currentLevelTime<0&&this.goToNextLevel();break;case O.MAIN_MENU:break;case O.GAME_OVER:this.gameOver(),this.inputStates.space&&this.startNewGame()}requestAnimationFrame(this.mainLoop.bind(this))}},{key:"goToNextLevel",value:function(){this.currentLevelTime=R,this.currentLevel++;this.road.speed.y*=1.2,this.truck.speed.y*=1.2,this.car.speed.y*=1.2,this.taxi.speed.y*=1.2}},{key:"startNewGame",value:function(){this.currentLevelTime=R,this.currentLevel=1,this.currentGameState=O.RUNNING,this.resetEntities()}},{key:"displayScore",value:function(){var t=this.ctx,e=this.currentLevel,i=this.currentLevelTime;t.save(),t.fillStyle="White",t.fillText("Level: "+e,300,30),t.fillText("Time: "+(i/1e3).toFixed(1),300,60),t.restore()}}],[{key:"checkCollision",value:function(t,e){d(t,e,20)&&(d(t,e)?t.moveToStartPosition():t.speed=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},s=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),s.forEach(function(e){n(t,e,i[e])})}return t}({},e.speed))}}]),t}();window.onload=function(){(new j).start(document.querySelector("canvas"))}}],[[5,1]]]);
//# sourceMappingURL=main.de9c6f18.chunk.js.map