(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(t,e,i){t.exports=i.p+"static/media/Audi.5498a290.png"},function(t,e,i){t.exports=i.p+"static/media/truck.0c526a94.png"},function(t,e,i){t.exports=i.p+"static/media/road.a03ad39a.png"},function(t,e,i){t.exports=i.p+"static/media/taxi.b2ca867e.png"},function(t,e,i){t.exports=i.p+"static/media/Car.a39891fa.png"},function(t,e,i){t.exports=i(8)},function(t,e,i){},,function(t,e,i){"use strict";i.r(e);i(6);function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}var o={listen:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;!function(t){document.addEventListener("keydown",function(e){37===e.keyCode?t.left=!0:38===e.keyCode?t.up=!0:39===e.keyCode?t.right=!0:40===e.keyCode?t.down=!0:32===e.keyCode&&(t.space=!0)},!1),document.addEventListener("keyup",function(e){37===e.keyCode?t.left=!1:38===e.keyCode?t.up=!1:39===e.keyCode?t.right=!1:40===e.keyCode?t.down=!1:32===e.keyCode&&(t.space=!1)},!1)}(t),function(t,e){e.addEventListener("mousemove",function(i){t.mousePos=function(t,e){var i=e.getBoundingClientRect();return{x:t.clientX-i.left,y:t.clientY-i.top}}(i,e)},!1),e.addEventListener("mousedown",function(e){t.mousedown=!0,t.mouseButton=e.button},!1),e.addEventListener("mouseup",function(e){t.mousedown=!1},!1)}(t,e)}},r=0,c={getDelta:function(t){var e=t-r;return r=t,e},distanceToMove:function(t,e){return e*t/1e3}};function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e,i){return(u=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var s=new(Function.bind.apply(t,n));return i&&h(s,i.prototype),s}).apply(null,arguments)}var l=function(){function t(e,i,s,a,o){n(this,t),this.img=e,this.x=i,this.y=s,this.width=a,this.height=o}return a(t,[{key:"draw",value:function(t,e,i,n){t.drawImage(this.img,this.x,this.y,this.width,this.height,e,i,this.width*n,this.height*n)}}]),t}(),f=function(){function t(e,i){n(this,t),this.ctx=e,this.inputStates=i,this.position={x:0,y:0},this.scale=.7}return a(t,[{key:"setImage",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this.sprite=u(l,[t].concat(i))}},{key:"moveToStartPosition",value:function(){var t=this.ctx.canvas,e=t.height,i=t.width;this.position={x:i/2-this.sprite.width*this.scale/2,y:e-16-this.sprite.height*this.scale}}},{key:"setPosition",value:function(t,e){this.position={x:t,y:e}}},{key:"update",value:function(e){this.inputStates.left&&(this.position.x+=-t.maxSpeed*e),this.inputStates.right&&(this.position.x+=t.maxSpeed*e),this.sprite.draw(this.ctx,this.position.x,this.position.y,this.scale)}}]),t}();f.maxSpeed=.5;var p=f,d=function(){function t(e,i){n(this,t),this.ctx=e,this.inputStates=i,this.speed=.5,this.totalSeconds=0}return a(t,[{key:"setImage",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this.sprite=u(l,[t].concat(i))}},{key:"update",value:function(t){var e=this.ctx.canvas.width,i=this.sprite,n=i.height,s=i.width;this.totalSeconds+=t;var a=Math.ceil(e/s)+1,o=this.totalSeconds*this.speed%n;this.ctx.save(),this.ctx.translate(0,o);for(var r=0;r<a;r++)this.sprite.draw(this.ctx,e/2-s/2,-r*n,1);this.ctx.restore()}}]),t}();d.LANE_CENTER=[220,344,476];var v=d,y={images:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=0,s={};return new Promise(function(t){e.forEach(function(i){var a=new Image;a.src=i,a.onload=function(){n++,s[i]=a,n===e.length&&t(s)}})})}},x=function(){function t(e){n(this,t),this.ctx=e,this.scale=.9,this.speed={x:0,y:.1}}return a(t,[{key:"setImage",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this.sprite=u(l,[t].concat(i))}},{key:"moveToStartPosition",value:function(e){var i=e||this.startOffset;this.lane=t.getRandomInt(0,v.LANE_CENTER.length);var n=this.sprite,s=n.height,a=n.width;this.position={x:v.LANE_CENTER[this.lane]-a/2,y:-(s+i)},this.startOffset=i}},{key:"update",value:function(t){this.position.y+=this.speed.y*t,this.sprite.draw(this.ctx,this.position.x,this.position.y,this.scale),this.position.y>this.ctx.canvas.height&&this.moveToStartPosition()}}],[{key:"getRandomInt",value:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t}}]),t}(),m=i(0),g=i.n(m),w=i(1),k=i.n(w),S=i(2),T=i.n(S),E=i(3),N=i.n(E),L=i(4),C=i.n(L),R={MAIN_MENU:0,RUNNING:1,GAME_OVER:2},A=5e3,I=function(){function t(){n(this,t),this.inputStates={},this.currentGameState=R.RUNNING,this.currentLevel=1,this.currentLevelTime=A}return a(t,[{key:"start",value:function(t){var e=this;this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.ctx.font="20px Arial",o.listen(this.inputStates,this.canvas),this.player=new p(this.ctx,this.inputStates),this.road=new v(this.ctx,this.inputStates),this.truck=new x(this.ctx),this.taxi=new x(this.ctx),this.car=new x(this.ctx),this.loadAssets(function(t){e.player.setImage(t[g.a],78,24,96,216),e.road.setImage(t[T.a],0,0,840,650),e.truck.setImage(t[k.a],78,24,96,216),e.car.setImage(t[C.a],78,24,96,216),e.taxi.setImage(t[N.a],72,18,102,220),e.car.scale=.79,e.taxi.scale=.68,e.player.moveToStartPosition(),e.taxi.moveToStartPosition(200),e.truck.moveToStartPosition(450),e.car.moveToStartPosition(700),e.truck.speed.y=.12,e.taxi.speed.y=.09,requestAnimationFrame(e.mainLoop.bind(e))})}},{key:"loadAssets",value:function(t){y.images(g.a,T.a,k.a,N.a,C.a).then(function(e){return t(e)})}},{key:"clearCanvas",value:function(){var t=this.canvas,e=t.width,i=t.height;this.ctx.clearRect(0,0,e,i)}},{key:"mainLoop",value:function(t){var e=c.getDelta(t);switch(this.clearCanvas(),this.ctx.fillStyle="green",this.ctx.fillRect(0,0,100,100),this.road.update(e),this.player.update(e),this.truck.update(e),this.taxi.update(e),this.car.update(e),this.currentGameState){case R.RUNNING:this.currentLevelTime<0&&this.goToNextLevel();break;case R.MAIN_MENU:break;case R.GAME_OVER:this.ctx.fillText("GAME OVER",50,100),this.ctx.fillText("Press SPACE to start again",50,150),this.ctx.fillText("Move with arrow keys",50,200),this.ctx.fillText("Survive 5 seconds for next level",50,250)}requestAnimationFrame(this.mainLoop.bind(this))}},{key:"goToNextLevel",value:function(){this.currentLevelTime=5e3,this.currentLevel++}},{key:"startNewGame",value:function(){this.currentLevelTime=5e3,this.currentLevel=1,this.currentGameState=R.RUNNING}},{key:"displayScore",value:function(){var t=this.ctx,e=this.currentLevel,i=this.currentLevelTime;t.save(),t.fillStyle="Green",t.fillText("Level: "+e,300,30),t.fillText("Time: "+(i/1e3).toFixed(1),300,60),t.restore()}}]),t}();window.onload=function(){(new I).start(document.querySelector("canvas"))}}],[[5,1]]]);
//# sourceMappingURL=main.91927030.chunk.js.map